# Copy this file to `.env.local` and fill in values. DO NOT commit real secrets.

# Rate Limiting Configuration
# ============================================

# Redis Connection
# Option 1: Upstash (serverless/production)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# Option 2: Standard Redis (local/docker)
# If set, this takes precedence over Upstash
REDIS_URL=redis://localhost:6379

# Enable/Disable rate limiting globally (default: true)
# Set to 'false' to bypass all rate limiting
RATE_LIMIT_ENABLED=true

# Webhook endpoint limits (per IP address)
RATE_LIMIT_WEBHOOK_MAX=100        # Max requests (default: 100)
RATE_LIMIT_WEBHOOK_WINDOW=60      # Window in seconds (default: 60 = 1 minute)

# General API endpoint limits (per user ID)
RATE_LIMIT_API_MAX=60             # Max requests (default: 60)
RATE_LIMIT_API_WINDOW=60          # Window in seconds (default: 60 = 1 minute)

# Email sending limits (per user ID)
RATE_LIMIT_EMAIL_MAX=100          # Max requests (default: 100)
RATE_LIMIT_EMAIL_WINDOW=3600      # Window in seconds (default: 3600 = 1 hour)

# Auth0
# Your Auth0 domain (e.g. dev-xxxxx.us.auth0.com)
AUTH0_DOMAIN=
# Your Auth0 application client id
AUTH0_CLIENT_ID=
# Your Auth0 application client secret
AUTH0_CLIENT_SECRET=
# Session/encryption secret used by auth library
AUTH0_SECRET=

# App settings
APP_BASE_URL=http://localhost:3000
# Generic API secret used for server-side signing (optional)
API_SECRET=

# Google OAuth (for sending via Gmail)
# Create OAuth credentials in Google Cloud Console and paste values here
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Redirect URI used to obtain tokens (e.g. https://developers.google.com/oauthplayground or your production redirect)
GOOGLE_REDIRECT_URI=
# Long-lived refresh token for the account that will send email
GOOGLE_REFRESH_TOKEN=
# Email address that will appear as sender
EMAIL_ADDRESS=

# Google service account (optional, used for Pub/Sub or domain-wide delegation)
GOOGLE_CLOUD_PROJECT_ID=
GOOGLE_CLIENT_EMAIL=
# For multiline private keys, either paste the key with literal newlines
# (ensure the file preserves the newlines) or replace newlines with \n characters.
# Example (escaped newlines): -----BEGIN PRIVATE KEY-----\nMIIEvQIB...\n-----END PRIVATE KEY-----\n
GOOGLE_PRIVATE_KEY=

# Pub/Sub Webhook Authentication
# The audience URL must match the URL you configured in your Pub/Sub push subscription
PUBSUB_VERIFICATION_AUDIENCE=https://your-domain.com/api/webhook
# The service account email used by Pub/Sub to sign OIDC tokens
# Format: service-PROJECT_NUMBER@gcp-sa-pubsub.iam.gserviceaccount.com
PUBSUB_SERVICE_ACCOUNT_EMAIL=

# Database RBAC Connection Strings
# Use app_admin for migrations (DDL privileges)
DATABASE_ADMIN_URL=postgresql://app_admin:PASSWORD@host:5432/db?sslmode=require
# Use app_readwrite for API runtime (CRUD privileges)
DATABASE_URL=postgresql://app_readwrite:PASSWORD@host:5432/db?sslmode=require
# Optional: app_readonly for reporting/debugging (SELECT only)
# DATABASE_READONLY_URL=postgresql://app_readonly:PASSWORD@host:5432/db?sslmode=require

# Notes:
# - After populating `.env.local` run `npx prisma generate` if you changed Prisma settings.
# - Keep `.env.local` out of source control. Add it to .gitignore if not already ignored.
# - For obtaining a Gmail refresh token via OAuth Playground: open https://developers.google.com/oauthplayground,
#   enable "Use your own OAuth credentials" in settings, enter the client ID/secret, authorize Gmail scopes
#   (https://www.googleapis.com/auth/gmail.send, https://www.googleapis.com/auth/gmail.modify), then exchange code for tokens.